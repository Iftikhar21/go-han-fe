@inherits LayoutComponentBase

<div class="min-h-screen bg-gray-100 flex flex-col">
    <!-- Sidebar -->
    <AdminSidebar _sidebarOpen="_sidebarOpen" _sidebarOpenChanged="OnSidebarOpenChanged" />

    <!-- Overlay untuk mobile -->
    @if (_sidebarOpen)
    {
        <div class="fixed inset-0 bg-black/50 z-30 lg:hidden" @onclick="ToggleSidebar"></div>
    }

    <!-- Main Content Area -->
    <div class="lg:ml-80 flex-1 flex flex-col">
        <AdminHeader Title="@Title" OnMenuToggle="ToggleSidebar" />

        <main class="flex-1 p-4 lg:p-6 bg-gray-100">
            <div class="max-w-full pt-16">
                @Body
            </div>
        </main>

        <Footer />
    </div>
</div>

@code {
    [Parameter]
    public string Title { get; set; } = "Dashboard";

    private bool _sidebarOpen = false;

    private void ToggleSidebar()
    {
        _sidebarOpen = !_sidebarOpen;
        StateHasChanged();
    }

    private async Task OnSidebarOpenChanged(bool value)
    {
        _sidebarOpen = value;
        await InvokeAsync(StateHasChanged);
    }
}